{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/settings.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '52683370-9ae3cf283454fd0e20897a7f1';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport const PER_PAGE = 9;\n\nconst API_PARAMS = {\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: PER_PAGE,\n};\n\nexport function getImagesByQuery(query, page) {\n  if (!query || typeof query !== 'string') {\n    return Promise.reject(new Error('Invalid query parameter'));\n  }\n\n  const params = {\n    key: API_KEY,\n    q: query,\n    page,\n    ...API_PARAMS,\n  };\n\n  return axios.get(BASE_URL, { params });\n}\n","import SimpleLightbox from 'simplelightbox';\n\nconst loaderEl = document.querySelector('.loader');\nconst galleryListEl = document.querySelector('.gallery');\n\nconst galleryLightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  const photoCardsMarkup = images\n    .map(image => createGalleryCard(image))\n    .join('');\n\n  galleryListEl.insertAdjacentHTML('beforeend', photoCardsMarkup);\n\n  galleryLightbox.refresh();\n}\n\nfunction createGalleryCard(image) {\n  return `\n    <li class=\"gallery-card\">\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img\n          src=\"${image.webformatURL}\"\n          alt=\"${image.tags}\"\n        />\n      </a>\n      <div class=\"card-description\">\n        <div class=\"description-item\">\n          <h2 class=\"description-title\">Likes</h2>\n          <p class=\"description-value\">${image.likes}</p>\n        </div>\n        <div class=\"description-item\">\n          <h2 class=\"description-title\">Views</h2>\n          <p class=\"description-value\">${image.views}</p>\n        </div>\n        <div class=\"description-item\">\n          <h2 class=\"description-title\">Comments</h2>\n          <p class=\"description-value\">${image.comments}</p>\n        </div>\n        <div class=\"description-item\">\n          <h2 class=\"description-title\">Downloads</h2>\n          <p class=\"description-value\">${image.downloads}</p>\n        </div>\n      </div>\n    </li>\n  `;\n}\n\nexport function clearGallery() {\n  galleryListEl.innerHTML = '';\n}\n\nexport function showLoader() {\n  loaderEl.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loaderEl.classList.add('hidden');\n}\n","import iziToast from 'izitoast';\n\niziToast.settings({\n  timeout: 4000,\n  theme: 'dark',\n  position: 'topRight',\n  resetOnHover: true,\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n});\n\nexport const toastMessage = message => iziToast.show({ message: [message] });\n","import { getImagesByQuery, PER_PAGE } from './js/pixabay-api';\nimport * as render from './js/render-functions';\nimport { toastMessage } from './js/settings';\n\nconst formEl = document.querySelector('.form');\nconst inputEl = formEl.elements['search-text'];\nconst loadBtnEl = document.querySelector('.load-btn');\n\nlet currentPage = 1;\nlet pagesAmount = 0;\nlet query = '';\n\nformEl.addEventListener('submit', onSearch);\n\nfunction onSearch(e) {\n  e.preventDefault();\n  handleImageSearch();\n  formEl.reset();\n}\n\nasync function handleImageSearch() {\n  try {\n    query = inputEl.value.trim();\n\n    if (!query) {\n      toastMessage('&#128269; enter the query to search');\n      return;\n    }\n\n    render.clearGallery();\n    render.showLoader();\n\n    currentPage = 1;\n    hideLoadBtn();\n\n    const { data } = await getImagesByQuery(query, currentPage);\n    const images = data.hits;\n\n    render.hideLoader();\n\n    if (images.length === 0) {\n      toastMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    render.createGallery(images);\n\n    pagesAmount = Math.ceil(data.totalHits / PER_PAGE);\n    if (pagesAmount > 1) showLoadBtn();\n  } catch (error) {\n    handleError(error);\n  }\n}\n\nasync function onLoadMore() {\n  try {\n    currentPage++;\n    hideLoadBtn();\n    render.showLoader();\n\n    const { data } = await getImagesByQuery(query, currentPage);\n    const images = data.hits;\n\n    render.hideLoader();\n\n    if (images.length === 0) {\n      toastMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    render.createGallery(images);\n    if (pagesAmount > currentPage) showLoadBtn();\n    else\n      toastMessage(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n  } catch (error) {\n    handleError(error);\n  }\n}\n\nfunction showLoadBtn() {\n  loadBtnEl.addEventListener('click', onLoadMore);\n  loadBtnEl.classList.remove('hidden');\n}\nfunction hideLoadBtn() {\n  loadBtnEl.removeEventListener('click', onLoadMore);\n  loadBtnEl.classList.add('hidden');\n}\n\nfunction handleError(error) {\n  render.hideLoader();\n  toastMessage('Failed to fetch images. Please try again later.');\n  console.log(error);\n}\n"],"names":["API_KEY","BASE_URL","PER_PAGE","API_PARAMS","getImagesByQuery","query","page","params","axios","loaderEl","galleryListEl","galleryLightbox","SimpleLightbox","createGallery","images","photoCardsMarkup","image","createGalleryCard","clearGallery","showLoader","hideLoader","iziToast","toastMessage","message","formEl","inputEl","loadBtnEl","currentPage","pagesAmount","onSearch","handleImageSearch","render.clearGallery","render.showLoader","hideLoadBtn","data","render.hideLoader","render.createGallery","showLoadBtn","error","handleError","onLoadMore"],"mappings":"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"}